/**
 * Form field styles – labels and inputs
 * Uses design tokens – requires design-system.css
 */

/* ========== Labels ========== */
/* Form labels always appear above inputs */
.econ-form-label label,
.econ-form-label .form-label {
  color: var(--label-color);
  display: block;
  font-size: var(--label-font-size);
  font-family: var(--font-family);
  font-weight: var(--label-font-weight);
  letter-spacing: var(--letter-spacing-default);
  margin-left: var(--label-margin-left);
  margin-bottom: var(--label-margin-bottom);
}

/* ========== Input fields ========== */
/* Base styles for text inputs and select dropdowns */
.econ-container .form-control,
.econ-container .form-select {
  box-sizing: border-box;
  /* Remove Bootstrap's default background images (caret icons, etc.) */
  background-image: none;
  background-repeat: no-repeat;
  background-position: unset;
  background-size: unset;
  
  background-color: var(--input-background);
  border: unset;
  border-color: var(--input-border-color);
  border-width: var(--input-border-width);
  border-style: solid;
  border-radius: var(--input-border-radius);
  font-size: var(--input-font-size);
  font-family: var(--font-family);
  color: var(--input-color);
  font-weight: var(--input-font-weight);
  letter-spacing: var(--letter-spacing-default);
  text-transform: none;
  padding: var(--input-padding);
  transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
  word-wrap: normal;
}

/* Focus state - darker border and subtle shadow */
.econ-container .form-control:focus,
.econ-container .form-select:focus,
.econ-container .form-control:hover,
.econ-container .form-select:hover {
  border-color: var(--input-border-color-focus);
  outline: 0;
  box-shadow: var(--input-box-shadow-focus);
}

/* ========== Select dropdowns ========== */
/* Remove native browser dropdown caret */
.econ-form-control-select .form-select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  display: block;
  width: 100%;
}

/* Select wrapper - positioned relative for custom caret */
.econ-form-control-select {
  box-sizing: border-box;
  position: relative;
}

/* Custom dropdown caret - gray box with white chevron icon */
.econ-form-control-select::after {
  content: "";
  position: absolute;
  pointer-events: none;

  top: 50%;
  right: 0;
  width: 29px;
  height: 100%;

  background-color: var(--caret-background);
  transform: translateY(-50%);

  border-radius: var(--caret-border-radius);

  /* White chevron down icon */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 12 12'%3E%3Cpath fill='none' stroke='%23ffffff' stroke-width='1' stroke-linecap='round' stroke-linejoin='round' d='M2 4l4 4 4-4'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
}

/* ========== Form field spacing ========== */
/* Vertical spacing between form groups and form rows */
.econ-form-group + .econ-form-group,
.econ-fragment-form-row {
  margin-top: var(--input-margin-between);
  position: relative;
}

/* ========== Form control width ========== */
/* Ensure form control outer takes full width when using col-10 */
.econ-fragment > .econ-form-group .econ-form-control-outer.col-10 {
  width: 100%;
}

/* ========== Bootstrap overrides ========== */
/* Override external stylesheet's padding-bottom on form groups */
form .econ-form-group.pb-3 {
  padding-bottom: 0 !important;
}

/* ========== Radio form fields ========== */
/* Radio label container */
.econ-fragment-radio-group .econ-form-label {
  display: block;
  padding: 0;
}

.econ-fragment-radio-group .econ-form-control-outer {
  flex: 0 0 calc(100% - 43px);
}

/* .econ-fragment-radio-group .input-group.row {
  display: block;
  position: relative;
  width: calc(100% - 43px);
} */

.econ-fragment-radio-group .col-10 > .row {
  display: block;
}

/* Radio button container box - bordered box with padding */
.econ-fragment-radio-group .econ-radio .col-6 {
  box-sizing: border-box;
  border: var(--input-border-width) solid var(--input-border-color);
  border-radius: var(--input-border-radius);
  padding: calc(var(--input-padding) * 2) var(--input-padding);
  position: relative; /* Required for label overlay positioning */
  cursor: pointer; /* Visual feedback that the whole box is clickable */
}

/* Radio button label - stretched to cover entire container */
/* This makes the entire .col-6 box clickable via the label */
.econ-fragment-radio-group .econ-radio .col-6 .econ-radio-label {
  position: static; /* Keep label in normal flow for text positioning */
}

.econ-fragment-radio-group .econ-radio .col-6:hover,
.econ-fragment-radio-group .econ-radio .col-6:focus {
  border-color: transparent
}

.econ-fragment-radio-group .econ-radio .col-6:hover .econ-radio-label::after,
.econ-fragment-radio-group .econ-radio .col-6:focus .econ-radio-label::after {
  border: var(--input-border-width) solid var(--color-primary);
  border-radius: var(--input-border-radius);
}

/* Clickable overlay - covers entire .col-6 container */
/* Uses ::after pseudo-element to extend label's clickable area */
.econ-fragment-radio-group .econ-radio .col-6 .econ-radio-label::after {
  content: "";
  position: absolute;
  inset: 0; /* Covers entire parent (top: 0, right: 0, bottom: 0, left: 0) */
  cursor: pointer;
}

/* Active/selected state - visual feedback for selected radio option */
.econ-fragment-radio-group .econ-radio .col-6.econ-radio--active {
  background-color: var(--color-background);
  border-color: var(--input-border-color-focus);
  box-shadow: var(--input-box-shadow-focus);
}

.econ-fragment-radio-group > .econ-form-group {
  position: relative;
}


/* ========== Checkbox labels ========== */
/* Checkbox label container */
.econ-checkbox-label {
  display: block;
}

/* Paragraph text within checkbox labels */
.econ-checkbox-label p {
  font-size: var(--font-size-12);
}

/* Second paragraph - truncated with fade effect for long text */
.econ-checkbox-label p:nth-of-type(2) {
  position: relative;
  max-height: 3.75em; /* ~2.5 lines at 1.5em line-height */
  line-height: 1.5em;
  overflow: hidden;
}

/* Fade gradient overlay at bottom of truncated paragraph */
.econ-checkbox-label p:nth-of-type(2)::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3.5em;
  background: linear-gradient(180deg, transparent 0%, var(--color-gradient-end) 100%);
  pointer-events: none;
}

/* Hide third paragraph initially (shown via JS when expanded) */
.econ-checkbox-label p:nth-of-type(3) {
  display: none;
}

/* When expanded, remove restrictions */
.econ-checkbox-label p:nth-of-type(2).expanded {
  max-height: none !important;
  overflow: visible !important;
}

/* Remove fade when expanded */
.econ-checkbox-label p:nth-of-type(2).expanded::after {
  display: none !important;
}

/* Show third paragraph when visible class is added */
.econ-checkbox-label p:nth-of-type(3).visible {
  display: block !important;
}

/* ========== Checkbox inputs ========== */
/* Valid checkbox label text color */
.econ-container .form-check-input.is-valid~.form-check-label {
  color: var(--color-text);
}

/* Base checkbox input styles - fixed 25x25px size */
.econ-container .form-check-input {
  width: 1.5625rem; /* 25px */
  height: 1.5625rem; /* 25px */
  min-width: 1.5625rem; /* prevent shrinking in flex containers */
  flex-shrink: 0;
  margin-top: 0;
  vertical-align: top;
  background-color: #fff;
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  border: var(--input-border-width) solid var(--color-text);
  border-radius: var(--input-border-radius);
  appearance: none;
  print-color-adjust: exact;
}

/* Reset Bootstrap's float and margin */
.econ-container .form-check .form-check-input {
  float: unset;
  margin-left: 0;
  vertical-align: middle;
}

/* Valid checkbox border color */
.econ-container .form-check-input.is-valid {
  border-color: var(--color-text);
}

.econ-container .form-check-input:checked,
.econ-container .form-check-input.is-valid:checked {
  background-color: var(--color-primary);
  border-color: var(--input-border-color-focus);
  color: var(--color-text);
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e")
}

/* Checkbox border radius */
.econ-container .form-check-input[type=checkbox] {
  border-radius: var(--input-border-radius);
}

/* Checkbox focus state */
.econ-container .form-check-input:focus,
.econ-container .form-check-input:hover {
  border-color: var(--color-primary);
  outline: 0;
  box-shadow: var(--input-box-shadow-focus);
}